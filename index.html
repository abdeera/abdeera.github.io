<head>
<script src="https://code.jquery.com/jquery-3.2.1.js"></script>
<script src="https://rawgit.com/Joker-Jelly/catta/master/dist/catta.js"></script>

<script language=javascript>
var count = 0;
function redirect(a,b,param){
  ifServerOnline(a + "/landing1/images/pause.png",function()
{
    window.location = a;//  server online code here
},
function ()
{
     ifServerOnline(a + ":3/landing1/images/pause.png",function()
	{
           window.location = a + ":3";//  server online code here
	},
        function(){
	     b.apply(this, param)
        }
	
    );
}
  );
  
}
  function ifServerOnline(imgserver,ifOnline, ifOffline)
{
    var img = document.getElementById('imagerow').appendChild(document.createElement("img"));
    img.onload = function()
    {
        ifOnline && ifOnline.constructor == Function && ifOnline();
    };
    img.onerror = function()
    {
        ifOffline && ifOffline.constructor == Function && ifOffline();
    };
    img.src = imgserver;
}
 function renderip(){
  $.ajax({
    method: 'POST',
    url: "https://gist.github.com/",
    headers: {
    'Cache-Control':'max-age=0',
    'Upgrade-Insecure-Requests':'1',
    'Host':'gist.github.com',
    'User-Agent':'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36',
    'Accept':'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',
    'Accept-Language':'r-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4',
    'Accept-Encoding':'gzip, deflate, br',
    'Content-Type':'application/x-www-form-urlencoded', 
    'Referer':'https://gist.github.com/',
    'origin':'https://gist.github.com'
    },
	dataType : "json",
	data: {
    'utf8':'%E2%9C%93',
    'authenticity_token':val,
    'gist[description]':'ip_request160617',
    'gist[contents][][oid]':'',
    'gist[contents][][name]':'ip_request160617',
    'new_filename':'ip_request160617',
    'content_changed':'true',
    'gist[contents][][value]':'1122334455',
    'gist[public]':'1'
    }
   }).done(function(data) { 
   alert(data);
});
};
 function gettoken(){
 $.ajax({
   url:'https://gist.github.com/',
   type:'GET',
   success: function(data) {
       //var content = $('<div>').append(data).find('[name="authenticity_token"]');//  ('#content');
       //$('#content').html( content );
	   
	   $('#content').html($(data).find('[name="authenticity_token"]').html());
	   alert($('#content').html());
   }
});
 };

</script>
</head>
<body>
<input type="hidden" id="ipcontent" value="abdoupc.ddns.net" />
<table width="700px" height="30px" border=3>
<tr ><td  width="10px" align="left" id="imagerow"></td> </tr></table>
<script language=javascript>
//document.domain = "github.com";  
function getoken(){
 
 $.ajax({
   url:'https://abdouwebsite.000webhostapp.com/index.html',
   type:'GET',
   headers: {
    'Cache-Control':'max-age=0',
    'Upgrade-Insecure-Requests':'1',
    'Accept':'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp;q=0.8', 
    'Accept-Language':'r-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4',
    'Access-Control-Allow-Origin':'*',
    'origin':'https://abdouwebsite.000webhostapp.com/', //'https://gist.github.com',
    'Access-Control-Allow-Headers': 'Origin, X-Requested-With, Content-Type, Accept',
    'Content-Type': 'application/x-www-form-urlencoded'
    },  //,*/*
   success: function(data) {
       //var content = $('<div>').append(data).find('[name="authenticity_token"]');//  ('#content');
       //$('#content').html( content );
	   alert($(data).html());
	   $('#content').html($(data).find('[name="authenticity_token"]').html());
	   alert($('#content').html());
   }
});
 };
	function getIframeTextip1() {
            var iframe0 = document.getElementById("iframe0");
            iframe0.contentWindow.postMessage("givemeip", '*'); 
	    return;
	    var iframe0document=iframe0.contentDocument||iframe0.contentWindow.document;
	    var inputIframe = iframe0document.getElementsByTagName("body")[0];
            alert(inputIframe);
        }
	function getIframeTextip2() {
            var iframe0 = document.getElementById("iframe0");
            iframe0.contentWindow.postMessage("givemeipagain", '*'); 
	    return;
	    
        }
	window.addEventListener('message', receivemessage, false);
    function receivemessage(event) { 

    // IMPORTANT: Check the origin of the data! 
    if (~event.origin.indexOf('abdouwebsite.000webhostapp.com')) { 
        // The data has been sent from your site 
	if (event.data['success']=='ip1')
		redirect(event.data['host'],redirect,[event.data['address'],getIframeTextip2,null])
        if (event.data['success']=='ip2')
		redirect(event.data['host'],redirect,[event.data['address'],kill,null])
        // The data sent with postMessage is stored in event.data 
        console.log(event.data['ip']); 
        
    } else { 
        // The data hasn't been sent from your site! 
        // Be careful! Do not use it. 
          console.log("error"); 
         return; 
    } 
   }
	function kill(){
		count+=1;
		if (count==10)
		 return;
		redirect('http://abdoupc.ddns.net',getIframeTextip1,null);
		
		
	}
	
	//getIframeText();
	/*catta('./data/simple.json').then(function (res) {
    	console.log(res);
  	});
	$.getJSON('https://anyorigin.com/go?url=textuploader.com/d0gvs/raw&callback=?', function(data){
	alert(data.contents);
	});
   	$.getJSON('https://www.whateverorigin.org/get?url=' + encodeURIComponent('https://gist.github.com') + '&callback=?', function(data){
	alert(data.contents);
   	});*/
	
</script>
<iframe id="iframe0"  src="https://abdouwebsite.000webhostapp.com/ips.html"  height="0" frameborder="0" scrolling="no"  onload="redirect($('#ipcontent')[0].value,getIframeTextip1,null);">

</body>

